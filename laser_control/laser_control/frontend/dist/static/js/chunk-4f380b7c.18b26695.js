(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f380b7c"],{"0f66":function(e,t,a){"use strict";a.d(t,"i",function(){return i}),a.d(t,"c",function(){return o}),a.d(t,"g",function(){return l}),a.d(t,"j",function(){return s}),a.d(t,"d",function(){return r}),a.d(t,"e",function(){return c}),a.d(t,"b",function(){return u}),a.d(t,"h",function(){return d}),a.d(t,"a",function(){return m}),a.d(t,"f",function(){return f});var n=a("b775");function i(e){return Object(n["a"])({url:"/node/store",method:"post",data:e})}function o(e){return Object(n["a"])({url:"/node/batch_store",method:"post",data:e})}function l(){return Object(n["a"])({url:"/node/list",method:"get"})}function s(e){return Object(n["a"])({url:"/node/update",method:"post",data:e})}function r(e){return Object(n["a"])({url:"/node/change_role",method:"post",data:e})}function c(e){return Object(n["a"])({url:"/node/delete",method:"post",data:e})}function u(e){return Object(n["a"])({url:"/node/batch_delete",method:"post",data:e})}function d(){return Object(n["a"])({url:"/node/list_shards",method:"get",timeout:2e4})}function m(e){return Object(n["a"])({url:"/node/ansible",method:"post",data:e})}function f(e){return Object(n["a"])({url:"/node/operation_info",method:"get",params:e})}},"3d6a":function(e,t,a){},"5df3":function(e,t,a){"use strict";var n=a("02f4")(!0);a("01f9")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,a=this._i;return a>=t.length?{value:void 0,done:!0}:(e=n(t,a),this._i+=e.length,{value:e,done:!1})})},6724:function(e,t,a){"use strict";a("8d41");var n="@@wavesContext";function i(e,t){function a(a){var n=Object.assign({},t.value),i=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},n),o=i.ele;if(o){o.style.position="relative",o.style.overflow="hidden";var l=o.getBoundingClientRect(),s=o.querySelector(".waves-ripple");switch(s?s.className="waves-ripple":(s=document.createElement("span"),s.className="waves-ripple",s.style.height=s.style.width=Math.max(l.width,l.height)+"px",o.appendChild(s)),i.type){case"center":s.style.top=l.height/2-s.offsetHeight/2+"px",s.style.left=l.width/2-s.offsetWidth/2+"px";break;default:s.style.top=(a.pageY-l.top-s.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",s.style.left=(a.pageX-l.left-s.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return s.style.backgroundColor=i.color,s.className="waves-ripple z-active",!1}}return e[n]?e[n].removeHandle=a:e[n]={removeHandle:a},a}var o={bind:function(e,t){e.addEventListener("click",i(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[n].removeHandle,!1),e.addEventListener("click",i(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[n].removeHandle,!1),e[n]=null,delete e[n]}},l=function(e){e.directive("waves",o)};window.Vue&&(window.waves=o,Vue.use(l)),o.install=l},7867:function(e,t,a){"use strict";var n=a("3d6a"),i=a.n(n);i.a},"8d41":function(e,t,a){},"90fe":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-form",{ref:"searchForm",staticStyle:{"margin-left":"20px"},attrs:{model:e.listQuery,"label-position":"left"}},[a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"数据库","label-width":"60px",prop:"SearchDataBase"}},[a("el-input",{attrs:{clearable:""},model:{value:e.listQuery.DatabaseName,callback:function(t){e.$set(e.listQuery,"DatabaseName",t)},expression:"listQuery.DatabaseName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"数据表","label-width":"60px",prop:"SearchTable"}},[a("el-input",{attrs:{clearable:""},model:{value:e.listQuery.TableName,callback:function(t){e.$set(e.listQuery,"TableName",t)},expression:"listQuery.TableName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-button",{staticClass:"filter-item",staticStyle:{width:"90px","margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.searchTable()}}},[e._v("\n            搜索\n          ")])],1)],1)],1),e._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.handleCreate}},[e._v("\n      添加\n    ")]),e._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-upload",loading:e.consulSynchronizing},on:{click:e.synchronizeDataToConsul}},[e._v("\n      同步\n    ")]),e._v(" "),a("el-checkbox",{staticClass:"filter-item",staticStyle:{"margin-left":"15px"},on:{change:function(t){e.tableKey=e.tableKey+1}},model:{value:e.showDesc,callback:function(t){e.showDesc=t},expression:"showDesc"}},[e._v("\n      描述\n    ")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"ID",width:"95",type:"index"}}),e._v(" "),a("el-table-column",{attrs:{label:"Laser 数据库"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.DatabaseName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Laser 数据表"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.Name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"数据中心"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.DcName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"目标数据中心"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.DistDcName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"分区数"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.PartitionNumber))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Ttl"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.Ttl))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"配置"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.ConfigName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.statusText[t.row.Status]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"禁止所有命令"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.offOnText[t.row.DenyAll]))])]}}])}),e._v(" "),e.showDesc?a("el-table-column",{attrs:{label:"描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.Desc))])]}}],null,!1,2723231799)}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"150","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleUpdate(n)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.deleteTable(n)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination-class"},[a("el-pagination",{attrs:{background:!0,"current-page":e.listQuery.Page,"page-size":e.listQuery.Limit,layout:"total, prev, pager, next, jumper",total:e.listTotal},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("h3",[e._v("基本信息")]),e._v(" "),a("el-divider"),e._v(" "),a("el-form",{ref:e.formRefs[0],staticStyle:{width:"400px","margin-left":"50px"},attrs:{rules:e.rules,model:e.temp,"label-position":"left","label-width":"140px"}},[a("el-form-item",{attrs:{label:"Laser 数据库",prop:"DatabaseName"}},[a("el-select",{staticClass:"el-select",attrs:{loading:e.listDBLoading,placeholder:"请选择",disabled:"update"==e.dialogStatus},on:{"visible-change":e.fetchDatabase,change:function(t){return e.getDatabaseIdByName(e.temp.DatabaseName)}},model:{value:e.temp.DatabaseName,callback:function(t){e.$set(e.temp,"DatabaseName",t)},expression:"temp.DatabaseName"}},e._l(e.databaseList,function(e){return a("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Name}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"Laser 数据表",prop:"Name"}},[a("el-input",{attrs:{disabled:"update"==e.dialogStatus},model:{value:e.temp.Name,callback:function(t){e.$set(e.temp,"Name",t)},expression:"temp.Name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分区数",prop:"PartitionNumber"}},[a("el-input",{attrs:{type:"number",min:"1",oninput:"value=value.replace(/[^\\d]/g,'')",disabled:"update"==e.dialogStatus},model:{value:e.temp.PartitionNumber,callback:function(t){e.$set(e.temp,"PartitionNumber",e._n(t))},expression:"temp.PartitionNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Ttl",prop:"Ttl"}},[a("el-input",{attrs:{type:"number",oninput:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.temp.Ttl,callback:function(t){e.$set(e.temp,"Ttl",e._n(t))},expression:"temp.Ttl"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"数据中心",prop:"DcName"}},[a("el-select",{staticClass:"el-select",attrs:{loading:e.listDcLoading,placeholder:"请选择"},on:{"visible-change":e.fetchDcData,change:function(t){return e.getDcIdByName(e.temp.DcName,"dc")}},model:{value:e.temp.DcName,callback:function(t){e.$set(e.temp,"DcName",t)},expression:"temp.DcName"}},e._l(e.dcList,function(e){return a("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Name}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"目标数据中心",prop:"DistDcName"}},[a("el-select",{staticClass:"el-select",attrs:{loading:e.listDcLoading,placeholder:"请选择"},on:{"visible-change":e.fetchDcData,change:function(t){return e.getDcIdByName(e.temp.DistDcName,"distDc")}},model:{value:e.temp.DistDcName,callback:function(t){e.$set(e.temp,"DistDcName",t)},expression:"temp.DistDcName"}},e._l(e.dcList,function(e){return a("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Name}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"配置",prop:"ConfigName"}},[a("el-select",{staticClass:"el-select",attrs:{loading:e.listConfigLoading,placeholder:"请选择"},on:{"visible-change":e.fetchConfigData,change:function(t){return e.getConfigIdByName(e.temp.ConfigName)}},model:{value:e.temp.ConfigName,callback:function(t){e.$set(e.temp,"ConfigName",t)},expression:"temp.ConfigName"}},e._l(e.configList,function(e){return a("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Name}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"Status"}},[a("el-switch",{attrs:{"active-text":e.statusText[1],"inactive-text":e.statusText[0],"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.temp.Status,callback:function(t){e.$set(e.temp,"Status",t)},expression:"temp.Status"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"禁止所有命令",prop:"DenyAll"}},[a("el-switch",{attrs:{"active-text":e.offOnText[1],"inactive-text":e.offOnText[0],"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.temp.DenyAll,callback:function(t){e.$set(e.temp,"DenyAll",t)},expression:"temp.DenyAll"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"绑定边缘节点",prop:"selectedEdgeNodeOptions"}},[a("el-cascader",{staticClass:"el-select",attrs:{options:e.edgeNodeOptions,props:e.cascaderProps,loading:e.listEdgeNodesLoading},on:{"visible-change":e.handleEdgeNodeCascaderVisibleChanged,change:e.handleEdgeNodeCascaderChanged},model:{value:e.selectedEdgeNodeOptions,callback:function(t){e.selectedEdgeNodeOptions=t},expression:"selectedEdgeNodeOptions"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"边缘节点流量比例",prop:"EdgeFlowRatio"}},[a("el-input",{attrs:{type:"number",min:"0",max:"100",oninput:"value=value.replace(/[^\\d]/g,'')",placeholder:"比例(0-100)",disabled:0==e.selectedEdgeNodeOptions.length},model:{value:e.temp.EdgeFlowRatio,callback:function(t){e.$set(e.temp,"EdgeFlowRatio",e._n(t))},expression:"temp.EdgeFlowRatio"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述",prop:"Desc"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.temp.Desc,callback:function(t){e.$set(e.temp,"Desc",t)},expression:"temp.Desc"}})],1)],1),e._v(" "),a("h3",[e._v("限流设置")]),e._v(" "),a("el-divider"),e._v(" "),a("el-form",{ref:e.formRefs[1],staticStyle:{"margin-left":"50px"},attrs:{model:e.temp,"label-position":"left","label-width":"80px",size:"mini",rules:e.rules}},[e._l(e.temp.TrafficLimits,function(t,n){return a("el-row",{key:n,attrs:{gutter:5}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"命令"+(n+1),prop:"TrafficLimits."+n+".Name",rules:e.rules.CommandLimitName}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"命令"},on:{change:function(a){return e.setCommandType(t)}},model:{value:t.Name,callback:function(a){e.$set(t,"Name",a)},expression:"item.Name"}},e._l(e.commandList,function(e){return a("el-option",{key:e.Name,attrs:{label:e.Name,value:e.Name}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"","label-width":"0px",prop:"TrafficLimits."+n+".LimitType",rules:e.rules.CommandLimitName}},[a("el-select",{attrs:{placeholder:"限制类型",disabled:t.OperationType==e.SINGLE_OPERATION},model:{value:t.LimitType,callback:function(a){e.$set(t,"LimitType",a)},expression:"item.LimitType"}},e._l(e.limitTypeList,function(e){return a("el-option",{key:e.Vaule,attrs:{label:e.Name,value:e.Value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"","label-width":"0px",prop:"TrafficLimits."+n+".LimitValue",rules:e.rules.CommandLimitValue}},[a("el-input",{attrs:{type:"number",min:"0",max:"100",oninput:"value=value.replace(/[^\\d]/g,'')",placeholder:"通过率(0-100)"},model:{value:t.LimitValue,callback:function(a){e.$set(t,"LimitValue",e._n(a))},expression:"item.LimitValue"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return a.preventDefault(),e.removeCommandLimit(t)}}},[e._v("删除")])],1)],1)}),e._v(" "),a("el-form-item",[a("el-button",{on:{click:function(t){return e.addCommandLimit()}}},[e._v("新增设置")])],1)],2),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){"create"===e.dialogStatus?e.createData():e.updateData()}}},[e._v("提交")])],1)],1)],1)},i=[],o=(a("5df3"),a("ac6a"),a("ad8f")),l=a("c48b"),s=a("a266"),r=a("de15"),c=a("6724"),u=a("61f7"),d=a("0f66"),m={directives:{waves:c["waves"]},data:function(){return{cascaderProps:{multiple:!0},SINGLE_OPERATION:1,MULTIPLE_OPERATION:2,LIMIT_KPS:0,LIMIT_QPS:1,list:null,listTotal:void 0,tableDelete:{TableId:void 0},currentPage:1,listLoading:!0,tableKey:0,showDesc:!0,listQuery:{Page:1,Limit:20,DatabaseName:"",TableName:""},listQueryDetail:{DatabaseId:void 0,TableId:void 0},dialogFormVisible:!1,textMap:{create:"创建数据表",update:"修改数据表"},dialogStatus:"create",statusText:{0:"禁用",1:"启用"},offOnText:{0:"关闭",1:"开启"},listDBLoading:!0,databaseList:null,listConfigLoading:!0,listDcLoading:!0,configList:null,dcList:null,consulSynchronizing:!1,commandList:[],limitTypeList:[{Name:"KPS",Value:0},{Name:"QPS",Value:1}],listNodeParams:{Page:void 0,Limit:void 0,GroupId:void 0,IsEdgeNode:!0},listEdgeNodesLoading:!0,edgeNodeOptions:void 0,selectedEdgeNodeOptions:[],temp:this.newTableInfo(),formRefs:["formBasicInfo","formCommandSet"],formCheckResults:[],rules:{DatabaseName:[{required:!0,message:"数据库名称是必填项"}],ConfigName:[{required:!0,message:"配置名称是必填项"}],Name:[{required:!0,message:"表名是必填项"}],DcName:[{required:!0,min:1,message:"数据中心是必填项目"}],DistDcName:[{required:!0,min:1,message:"目标数据中心是必填项目"}],PartitionNumber:[{required:!0,message:"分区数是必填项"},{type:"number",message:"请输入数字格式"},{validator:u["e"],trigger:"blur"}],CommandLimitName:[{required:!0,message:"必选项不能为空",trigger:"blur"}],CommandLimitValue:[{required:!0,message:"必填项不能为空",trigger:"blur"},{type:"number",message:"请输入数字格式"},{validator:u["b"],trigger:"blur"}],EdgeFlowRatio:[{required:!0,message:"必填项不能为空",trigger:"blur"},{type:"number",message:"请输入数字格式"},{validator:u["c"],trigger:"blur"}]}}},created:function(){this.fetchData(),this.resetTemp(),this.fetchCommands(),this.fetchEdgeNodesOptions()},methods:{fetchData:function(){var e=this;this.listLoading=!0,Object(o["d"])(this.listQuery).then(function(t){e.list=t.Data.Items,e.listTotal=t.Data.Total,e.listLoading=!1})},fetchDataDetail:function(e){var t=this;this.listQueryDetail.DatabaseId=e.DatabaseId,this.listQueryDetail.TableId=e.Id,Object(o["e"])(this.listQueryDetail).then(function(e){t.temp=e.Data.Items[0],t.selectedEdgeNodeOptions=t.edgeNodeInfosToOptions(t.temp.BindEdgeNodes)})},fetchCommands:function(){var e=this;Object(o["c"])().then(function(t){e.commandList=t.Data.Items})},resetTemp:function(){this.temp=this.newTableInfo()},handleCreate:function(){var e=this;this.resetTemp(),this.selectedEdgeNodeOptions=[],this.dialogFormVisible=!0,this.dialogStatus="create",this.$nextTick(function(){e.formRefs.forEach(function(t){e.clearFormValidate(t)})})},createData:function(){var e=this;this.formCheckResults=[],this.formRefs.forEach(function(t){e.checkForm(t)}),Promise.all(this.formCheckResults).then(function(){e.temp.BindEdgeNodeIds=e.edgeNodeOptionsToNodeIds(e.selectedEdgeNodeOptions),e.temp.BindEdgeNodes=null,Object(o["a"])(e.temp).then(function(t){e.$notify({title:"Success",message:"Created Successfully",type:"success",duration:2e3}),e.fetchData()}),e.dialogFormVisible=!1}).catch(function(e){console.log(e)})},handleUpdate:function(e){var t=this;this.dialogFormVisible=!0,this.dialogStatus="update",this.$nextTick(function(){t.formRefs.forEach(function(e){t.clearFormValidate(e)})}),this.fetchDataDetail(e)},updateData:function(){var e=this;console.log(this.temp),this.formCheckResults=[],this.formRefs.forEach(function(t){e.checkForm(t)}),Promise.all(this.formCheckResults).then(function(){e.temp.BindEdgeNodeIds=e.edgeNodeOptionsToNodeIds(e.selectedEdgeNodeOptions),e.temp.BindEdgeNodes=null,Object(o["g"])(e.temp).then(function(t){e.$notify({title:"Success",message:"Update Successfully",type:"success",duration:2e3}),e.fetchData()}),e.dialogFormVisible=!1}).catch(function(e){console.log(e)})},deleteTable:function(e){var t=this;this.tableDelete.TableId=e.Id,this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o["b"])(t.tableDelete).then(function(e){t.$notify({title:"Success",message:"Delete Successfully",type:"success",duration:2e3}),t.fetchData()})})},searchTable:function(){this.listQuery.Page=1,this.fetchData()},synchronizeDataToConsul:function(){var e=this;this.$confirm("确认要同步数据表及配置信息？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.consulSynchronizing=!0,Object(o["f"])().then(function(t){e.$notify({title:"Success",message:"Synchronize Successfully",type:"success",duration:2e3})}).finally(function(t){e.consulSynchronizing=!1})}).catch(function(){})},fetchDatabase:function(e){var t=this;e&&(this.listDBLoading=!0,Object(l["c"])().then(function(e){t.databaseList=e.Data.Items,t.listDBLoading=!1}))},getDatabaseIdByName:function(e){for(var t=0;t<this.databaseList.length;++t)if(e==this.databaseList[t].Name){this.temp.DatabaseId=this.databaseList[t].Id;break}},fetchDcData:function(e){var t=this;e&&(this.listDcLoading=!0,Object(r["b"])().then(function(e){t.dcList=e.Data.Items}).finally(function(){t.listDcLoading=!1}))},fetchConfigData:function(e){var t=this;e&&(this.listConfigLoading=!0,Object(s["c"])().then(function(e){t.configList=e.Data.Items}).finally(function(){t.listConfigLoading=!1}))},getConfigIdByName:function(e){for(var t=0;t<this.configList.length;++t)if(e==this.configList[t].Name){this.temp.ConfigId=this.configList[t].Id;break}},getDcIdByName:function(e,t){for(var a=0;a<this.dcList.length;++a)if(e==this.dcList[a].Name){"dc"==t?this.temp.DcId=this.dcList[a].Id:this.temp.DistDcId=this.dcList[a].Id;break}},fetchEdgeNodesOptions:function(){var e=this;Object(d["g"])().then(function(t){e.edgeNodeOptions=new Array;var a=t.Data;a.forEach(function(t){var a={value:t.Id,label:t.GroupName,children:[]};t.Nodes.forEach(function(e){if(e.IsEdgeNode){var t={value:e.Id,label:"node"+e.NodeId+"("+e.Host+":"+e.Port+")"};a.children.push(t)}}),a.children.length>0&&e.edgeNodeOptions.push(a)})})},handleEdgeNodeCascaderVisibleChanged:function(e){e&&this.fetchEdgeNodesOptions()},handleEdgeNodeCascaderChanged:function(e){0==e.length&&(this.temp.EdgeFlowRatio=0)},handleCurrentChange:function(e){this.listQuery.Page=e,this.fetchData()},addCommandLimit:function(){var e=this.temp.TrafficLimits;null!=e&&e.push({Name:"",LimitType:"",LimitValue:void 0})},removeCommandLimit:function(e){var t=this.temp.TrafficLimits;if(null!=t){var a=t.indexOf(e);-1!=a&&t.splice(a,1)}},setCommandType:function(e){for(var t=0;t<this.commandList.length;++t)if(e.Name==this.commandList[t].Name){e.OperationType=this.commandList[t].OperationType,e.OperationType==this.SINGLE_OPERATION&&(e.LimitType=this.LIMIT_QPS);break}},checkForm:function(e){var t=this,a=new Promise(function(a,n){var i=t.$refs[e];void 0!=i?i.validate(function(e){e?a():n()}):a()});t.formCheckResults.push(a)},clearFormValidate:function(e){this.$refs[e].clearValidate()},edgeNodeInfosToOptions:function(e){var t=new Array;return e.forEach(function(e){var a=new Array;a[0]=e.GroupId,a[1]=e.Id,t.push(a)}),t},edgeNodeOptionsToNodeIds:function(e){var t=new Array;return e.forEach(function(e){t.push(e[1])}),t},newTableInfo:function(){return{Id:void 0,Name:"",Status:0,DenyAll:0,PartitionNumber:void 0,Ttl:0,Desc:"",DcId:void 0,DcName:"",DistDcId:void 0,DistDcName:"",DatabaseId:void 0,ConfigId:void 0,DatabaseName:"",ConfigName:"",TrafficLimits:[],BindEdgeNodes:[],BindEdgeNodeIds:[],EdgeFlowRatio:0}}}},f=m,p=(a("7867"),a("2877")),h=Object(p["a"])(f,n,i,!1,null,null,null);t["default"]=h.exports},a266:function(e,t,a){"use strict";a.d(t,"c",function(){return i}),a.d(t,"d",function(){return o}),a.d(t,"a",function(){return l}),a.d(t,"e",function(){return s}),a.d(t,"b",function(){return r});var n=a("b775");function i(e){return Object(n["a"])({url:"/table_config/list",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/table_config/list_detail",method:"get",params:e})}function l(e){return Object(n["a"])({url:"/table_config/store",method:"post",data:e})}function s(e){return Object(n["a"])({url:"/table_config/update",method:"post",data:e})}function r(e){return Object(n["a"])({url:"/table_config/delete",method:"post",data:e})}},ad8f:function(e,t,a){"use strict";a.d(t,"d",function(){return i}),a.d(t,"e",function(){return o}),a.d(t,"a",function(){return l}),a.d(t,"g",function(){return s}),a.d(t,"b",function(){return r}),a.d(t,"f",function(){return c}),a.d(t,"c",function(){return u});var n=a("b775");function i(e){return Object(n["a"])({url:"/table/list",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/table/list_detail",method:"get",params:e})}function l(e){return Object(n["a"])({url:"/table/store",method:"post",data:e})}function s(e){return Object(n["a"])({url:"/table/update",method:"post",data:e})}function r(e){return Object(n["a"])({url:"/table/delete",method:"post",data:e})}function c(){return Object(n["a"])({url:"table/synchronize",method:"post"})}function u(){return Object(n["a"])({url:"/table/list_commands",method:"get"})}},c48b:function(e,t,a){"use strict";a.d(t,"c",function(){return i}),a.d(t,"a",function(){return o}),a.d(t,"d",function(){return l}),a.d(t,"b",function(){return s});var n=a("b775");function i(e){return Object(n["a"])({url:"/database/list",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/database/store",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/database/update",method:"post",data:e})}function s(e){return Object(n["a"])({url:"/database/delete",method:"post",data:e})}},de15:function(e,t,a){"use strict";a.d(t,"b",function(){return i}),a.d(t,"a",function(){return o}),a.d(t,"c",function(){return l});var n=a("b775");function i(e){return Object(n["a"])({url:"/dc/list",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/dc/store",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/dc/update",method:"post",data:e})}}}]);