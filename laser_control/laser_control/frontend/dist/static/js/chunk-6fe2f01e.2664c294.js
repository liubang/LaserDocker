(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6fe2f01e"],{"2fea":function(e,t,a){"use strict";a.d(t,"c",function(){return n}),a.d(t,"a",function(){return r}),a.d(t,"d",function(){return o}),a.d(t,"b",function(){return s});var i=a("b775");function n(e){return Object(i["a"])({url:"/machine_category/list",method:"get",params:e})}function r(e){return Object(i["a"])({url:"/machine_category/store",method:"post",data:e})}function o(e){return Object(i["a"])({url:"/machine_category/update",method:"post",data:e})}function s(e){return Object(i["a"])({url:"/machine_category/delete",method:"post",data:e})}},"39e0":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-form",{ref:"searchForm",staticStyle:{"margin-left":"20px"},attrs:{model:e.queryParams,"label-position":"left"}},[a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"机器分类","label-width":"70px",prop:"SearchMachineCategory"}},[a("el-input",{attrs:{clearable:""},model:{value:e.queryParams.CategoryName,callback:function(t){e.$set(e.queryParams,"CategoryName",t)},expression:"queryParams.CategoryName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"机器IP","label-width":"60px",prop:"SearchMachineIp"}},[a("el-input",{attrs:{clearable:""},model:{value:e.queryParams.MachineIp,callback:function(t){e.$set(e.queryParams,"MachineIp",t)},expression:"queryParams.MachineIp"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-button",{staticClass:"filter-item",staticStyle:{width:"90px","margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.searchMachine()}}},[e._v("\n            搜索\n          ")])],1)],1)],1),e._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.handleCreate}},[e._v("\n      添加\n    ")]),e._v(" "),a("el-checkbox",{staticClass:"filter-item",staticStyle:{"margin-left":"15px"},on:{change:function(t){e.tableKey=e.tableKey+1}},model:{value:e.showDesc,callback:function(t){e.showDesc=t},expression:"showDesc"}},[e._v("\n      描述\n    ")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,attrs:{data:e.machineList,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"ID",width:"95",type:"index"}}),e._v(" "),e._e(),e._v(" "),a("el-table-column",{attrs:{label:"分类名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.MachineCategoryName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"IP"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.Ip))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"CPU核数"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.CpuCoreNumber))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"内存容量[GB]"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.MemorySizeGb))])]}}])}),e._v(" "),e.showDesc?a("el-table-column",{attrs:{label:"描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.Desc))])]}}],null,!1,2723231799)}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"150","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleUpdate(i)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.deleteMachine(i)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination-class"},[a("el-pagination",{attrs:{background:!0,"current-page":e.queryParams.Page,"page-size":e.queryParams.Limit,layout:"total, prev, pager, next, jumper",total:e.listTotal},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{rules:e.rules,model:e.temp,"label-position":"left","label-width":"120px"}},[a("el-form-item",{attrs:{label:"分类名称",prop:"MachineCategoryName"}},[a("el-select",{staticClass:"el-select",attrs:{loading:e.listLoading,placeholder:"请选择",disabled:"update"==e.dialogStatus},on:{"visible-change":e.fetchMachineCategory,change:function(t){return e.getMachineCategoryIdByName(e.temp.MachineCategoryName)}},model:{value:e.temp.MachineCategoryName,callback:function(t){e.$set(e.temp,"MachineCategoryName",t)},expression:"temp.MachineCategoryName"}},e._l(e.machineCategoryList,function(e){return a("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Name}})}),1)],1),e._v(" "),"update"==e.dialogStatus?a("el-form-item",{attrs:{label:"Ip",prop:"Ip"}},[a("el-input",{attrs:{disabled:"update"==e.dialogStatus},model:{value:e.temp.Ip,callback:function(t){e.$set(e.temp,"Ip",t)},expression:"temp.Ip"}})],1):a("el-form-item",{attrs:{label:"Ip",prop:"Ip"}},[a("el-input",{attrs:{type:"textarea",rows:10},model:{value:e.temp.Ip,callback:function(t){e.$set(e.temp,"Ip",t)},expression:"temp.Ip"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"CPU核数",prop:"CpuCoreNumber"}},[a("el-input",{model:{value:e.temp.CpuCoreNumber,callback:function(t){e.$set(e.temp,"CpuCoreNumber",t)},expression:"temp.CpuCoreNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"内存容量[GB]",prop:"MemorySizeGb"}},[a("el-input",{model:{value:e.temp.MemorySizeGb,callback:function(t){e.$set(e.temp,"MemorySizeGb",t)},expression:"temp.MemorySizeGb"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述",prop:"Desc"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.temp.Desc,callback:function(t){e.$set(e.temp,"Desc",t)},expression:"temp.Desc"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("\n        取消\n      ")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){"create"===e.dialogStatus?e.createMachine():e.updateMachine()}}},[e._v("\n        提交\n      ")])],1)],1)],1)},n=[],r=a("6724"),o=a("b775");function s(e){return Object(o["a"])({url:"/machine/list",method:"get",params:e})}function l(e){return Object(o["a"])({url:"/machine/store",method:"post",data:e})}function c(e){return Object(o["a"])({url:"/machine/update",method:"post",data:e})}function u(e){return Object(o["a"])({url:"/machine/delete",method:"post",data:e})}var m=a("2fea"),p={directives:{waves:r["waves"]},data:function(){return{listLoading:!1,machineList:void 0,machineCategoryList:void 0,listTotal:void 0,tableKey:0,showDesc:!0,temp:this.newMachineInfo(),queryParams:{CategoryName:"",MachineIp:"",Page:1,Limit:20},dialogFormVisible:!1,textMap:{create:"创建机器资源",update:"修改机器资源"},dialogStatus:"create",rules:{MachineCategoryName:[{required:!0,message:"分类名称是必填项"}],Ip:[{required:!0,message:"Ip是必填项"}],CpuCoreNumber:[{required:!0,message:"CPU核数是必填项"}],MemorySizeGb:[{required:!0,message:"内存容量[GB]是必填项"}]}}},created:function(){this.fetchMachineList()},methods:{fetchMachineList:function(){var e=this;this.listLoading=!0,s(this.queryParams).then(function(t){e.machineList=t.Data.Items,e.listTotal=t.Data.Total,e.listLoading=!1})},handleCreate:function(){var e=this;this.temp=this.newMachineInfo(),this.dialogFormVisible=!0,this.dialogStatus="create",this.$nextTick(function(){e.$refs["dataForm"].clearValidate()})},handleUpdate:function(e){var t=this;this.temp.Id=e.Id,this.temp.CategoryId=e.CategoryId,this.temp.MachineCategoryName=e.MachineCategoryName,this.temp.Ip=e.Ip,this.temp.CpuCoreNumber=e.CpuCoreNumber,this.temp.MemorySizeGb=e.MemorySizeGb,this.temp.Desc=e.Desc,this.dialogFormVisible=!0,this.dialogStatus="update",this.$nextTick(function(){t.$refs["dataForm"].clearValidate()})},createMachine:function(){var e=this;this.$refs["dataForm"].validate(function(t){t&&(l(e.temp).then(function(t){e.$notify({title:"Success",message:"Created Successfully",type:"success",duration:2e3}),e.fetchMachineList()}),e.dialogFormVisible=!1)})},fetchMachineCategory:function(e){var t=this;console.log(e),e&&(this.listLoading=!0,Object(m["c"])().then(function(e){t.machineCategoryList=e.Data.Items,t.listLoading=!1}))},getMachineCategoryIdByName:function(e){for(var t=0;t<this.machineCategoryList.length;++t)if(e===this.machineCategoryList[t].Name){this.temp.CategoryId=this.machineCategoryList[t].Id;break}},updateMachine:function(){var e=this;this.$refs["dataForm"].validate(function(t){t&&(c(e.temp).then(function(t){e.$notify({title:"Success",message:"Update Successfully",type:"success",duration:2e3}),e.fetchMachineList()}),e.dialogFormVisible=!1)})},handleCurrentChange:function(e){this.queryParams.Page=e,this.fetchMachineList()},deleteMachine:function(e){var t=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){u(e).then(function(e){t.$notify({title:"Success",message:"Delete Successfully",type:"success",duration:2e3}),t.fetchMachineList()})})},searchMachine:function(){this.queryParams.Page=1,this.fetchMachineList()},newMachineInfo:function(){return{Id:0,MachineCategoryName:"",CategoryId:0,Ip:"",CpuCoreNumber:"",MemorySizeGb:"",Desc:""}}}},d=p,h=a("2877"),f=Object(h["a"])(d,i,n,!1,null,null,null);t["default"]=f.exports},6724:function(e,t,a){"use strict";a("8d41");var i="@@wavesContext";function n(e,t){function a(a){var i=Object.assign({},t.value),n=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},i),r=n.ele;if(r){r.style.position="relative",r.style.overflow="hidden";var o=r.getBoundingClientRect(),s=r.querySelector(".waves-ripple");switch(s?s.className="waves-ripple":(s=document.createElement("span"),s.className="waves-ripple",s.style.height=s.style.width=Math.max(o.width,o.height)+"px",r.appendChild(s)),n.type){case"center":s.style.top=o.height/2-s.offsetHeight/2+"px",s.style.left=o.width/2-s.offsetWidth/2+"px";break;default:s.style.top=(a.pageY-o.top-s.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",s.style.left=(a.pageX-o.left-s.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return s.style.backgroundColor=n.color,s.className="waves-ripple z-active",!1}}return e[i]?e[i].removeHandle=a:e[i]={removeHandle:a},a}var r={bind:function(e,t){e.addEventListener("click",n(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[i].removeHandle,!1),e.addEventListener("click",n(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[i].removeHandle,!1),e[i]=null,delete e[i]}},o=function(e){e.directive("waves",r)};window.Vue&&(window.waves=r,Vue.use(o)),r.install=o},"8d41":function(e,t,a){}}]);