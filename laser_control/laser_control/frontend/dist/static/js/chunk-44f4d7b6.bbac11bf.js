(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44f4d7b6"],{"5e25":function(e,t,a){},6724:function(e,t,a){"use strict";a("8d41");var i="@@wavesContext";function s(e,t){function a(a){var i=Object.assign({},t.value),s=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},i),n=s.ele;if(n){n.style.position="relative",n.style.overflow="hidden";var o=n.getBoundingClientRect(),l=n.querySelector(".waves-ripple");switch(l?l.className="waves-ripple":(l=document.createElement("span"),l.className="waves-ripple",l.style.height=l.style.width=Math.max(o.width,o.height)+"px",n.appendChild(l)),s.type){case"center":l.style.top=o.height/2-l.offsetHeight/2+"px",l.style.left=o.width/2-l.offsetWidth/2+"px";break;default:l.style.top=(a.pageY-o.top-l.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",l.style.left=(a.pageX-o.left-l.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return l.style.backgroundColor=s.color,l.className="waves-ripple z-active",!1}}return e[i]?e[i].removeHandle=a:e[i]={removeHandle:a},a}var n={bind:function(e,t){e.addEventListener("click",s(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[i].removeHandle,!1),e.addEventListener("click",s(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[i].removeHandle,!1),e[i]=null,delete e[i]}},o=function(e){e.directive("waves",n)};window.Vue&&(window.waves=n,Vue.use(o)),n.install=o},"8d41":function(e,t,a){},"90db":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.handleCreate}},[e._v("\n      添加\n    ")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.ticketKey,attrs:{data:e.ticketList,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"ID",width:"95",type:"index"}}),e._v(" "),a("el-table-column",{attrs:{label:"创建者"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.Creator))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"SDK 类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.SDKType.toString()))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"业务描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.BusinessDescription))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"数据库名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.DatabaseName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"数据表名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.TableName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"数据过期时间(MS)"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.DataExpirationTime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"数据总量(GB)"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.DataSize))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"value 大小(KB)"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.ValueSize))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"调用接口"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.Command.toString()))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"分区数"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.PartitionNum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"当前状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.statusText[t.row.Status]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"150","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleUpdate(i)}}},[e._v("\n          "+e._s(e.textTicketStatusMap[i.TicketStatus])+"\n        ")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.deleteTicket(i)}}},[e._v("删除")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"80","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{type:"primary",size:"mini",disabled:1==i.Status||5==i.Status},on:{click:function(t){return e.handleProcess(i)}}},[e._v("\n          审核\n        ")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination-class"},[a("el-pagination",{attrs:{background:!0,"current-page":e.queryParams.Page,"page-size":e.queryParams.Limit,layout:"total, prev, pager, next, jumper",total:e.listTotal},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.textDialogStatusMap[e.dialogStatus],visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{rules:e.rules,model:e.temp,"label-position":"left","label-width":"120px",disabled:"watch"==e.temp.TicketStatus}},[a("el-form-item",{attrs:{label:"SDK 类型",prop:"SDKType"}},e._l(e.SDKTypes,function(t,i){return a("li",{staticStyle:{"list-style":"none"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.temp.SDKType,expression:"temp.SDKType"}],attrs:{type:"checkbox",id:i},domProps:{value:t.type,checked:Array.isArray(e.temp.SDKType)?e._i(e.temp.SDKType,t.type)>-1:e.temp.SDKType},on:{change:function(a){var i=e.temp.SDKType,s=a.target,n=!!s.checked;if(Array.isArray(i)){var o=t.type,l=e._i(i,o);s.checked?l<0&&e.$set(e.temp,"SDKType",i.concat([o])):l>-1&&e.$set(e.temp,"SDKType",i.slice(0,l).concat(i.slice(l+1)))}else e.$set(e.temp,"SDKType",n)}}}),e._v(" "),a("label",{attrs:{for:"index"}},[e._v(e._s(t.type))])])}),0),e._v(" "),a("el-form-item",{attrs:{label:"业务线",prop:"BusinessLine"}},[a("el-input",{model:{value:e.temp.BusinessLine,callback:function(t){e.$set(e.temp,"BusinessLine",t)},expression:"temp.BusinessLine"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"业务描述",prop:"BusinessDescription"}},[a("el-input",{model:{value:e.temp.BusinessDescription,callback:function(t){e.$set(e.temp,"BusinessDescription",t)},expression:"temp.BusinessDescription"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"业务 KR",prop:"BusinessKR"}},[a("el-input",{model:{value:e.temp.BusinessKR,callback:function(t){e.$set(e.temp,"BusinessKR",t)},expression:"temp.BusinessKR"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"读接口人(邮箱前缀)",prop:"ReadContactPersion"}},[a("el-input",{model:{value:e.temp.ReadContactPersion,callback:function(t){e.$set(e.temp,"ReadContactPersion",t)},expression:"temp.ReadContactPersion"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"写接口人(邮箱前缀)",prop:"WriteContactPersion"}},[a("el-input",{model:{value:e.temp.WriteContactPersion,callback:function(t){e.$set(e.temp,"WriteContactPersion",t)},expression:"temp.WriteContactPersion"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"批量导入接口人(邮箱前缀)",prop:"ImportDataContactPersion"}},[a("el-input",{model:{value:e.temp.ImportDataContactPersion,callback:function(t){e.$set(e.temp,"ImportDataContactPersion",t)},expression:"temp.ImportDataContactPersion"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Laser 数据库",prop:"DatabaseName"}},[a("el-select",{staticClass:"el-select",attrs:{filterable:"",loading:e.listDBLoading,placeholder:"请选择"},on:{"visible-change":e.fetchDatabase,change:function(t){return e.getDatabaseIdByName(e.temp.DatabaseName)},blur:e.inputDatabaseName},model:{value:e.temp.DatabaseName,callback:function(t){e.$set(e.temp,"DatabaseName",t)},expression:"temp.DatabaseName"}},e._l(e.databaseList,function(e){return a("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Name}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"Laser 数据表",prop:"TableName"}},[a("el-select",{staticClass:"el-select",attrs:{filterable:"",loading:e.listDTLoading,placeholder:"请选择"},on:{"visible-change":e.fetchDataTable,blur:e.inputTableName},model:{value:e.temp.TableName,callback:function(t){e.$set(e.temp,"TableName",t)},expression:"temp.TableName"}},e._l(e.dataTableList,function(e){return a("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Name}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"读 QPS",prop:"ReadQPS"}},[a("el-input",{attrs:{type:"number",min:"1",oninput:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.temp.ReadQPS,callback:function(t){e.$set(e.temp,"ReadQPS",e._n(t))},expression:"temp.ReadQPS"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"写 QPS",prop:"WriteQPS"}},[a("el-input",{attrs:{type:"number",min:"1",oninput:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.temp.WriteQPS,callback:function(t){e.$set(e.temp,"WriteQPS",e._n(t))},expression:"temp.WriteQPS"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"请求延时(P999)",prop:"RequestDelayLimit"}},[a("el-input",{attrs:{type:"number",min:"1",oninput:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.temp.RequestDelayLimit,callback:function(t){e.$set(e.temp,"RequestDelayLimit",e._n(t))},expression:"temp.RequestDelayLimit"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"数据过期时间(MS)",prop:"DataExpirationTime"}},[a("el-input",{attrs:{type:"number",min:"1",oninput:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.temp.DataExpirationTime,callback:function(t){e.$set(e.temp,"DataExpirationTime",e._n(t))},expression:"temp.DataExpirationTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"数据总量(GB)",prop:"DataSize"}},[a("el-input",{attrs:{type:"number",min:"1",oninput:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.temp.DataSize,callback:function(t){e.$set(e.temp,"DataSize",e._n(t))},expression:"temp.DataSize"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"value 大小预估(KB)",prop:"ValueSize"}},[a("el-input",{attrs:{type:"number",min:"1",oninput:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.temp.ValueSize,callback:function(t){e.$set(e.temp,"ValueSize",e._n(t))},expression:"temp.ValueSize"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"宕机影响范围",prop:"CrashInfluence"}},[a("el-input",{model:{value:e.temp.CrashInfluence,callback:function(t){e.$set(e.temp,"CrashInfluence",t)},expression:"temp.CrashInfluence"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"调用接口",prop:"Command"}},e._l(e.commandList,function(t,i){return a("li",{staticStyle:{"list-style":"none"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.temp.Command,expression:"temp.Command"}],attrs:{type:"checkbox",id:i},domProps:{value:t.Name,checked:Array.isArray(e.temp.Command)?e._i(e.temp.Command,t.Name)>-1:e.temp.Command},on:{click:function(a){return e.updateCommandChoosed(t)},change:function(a){var i=e.temp.Command,s=a.target,n=!!s.checked;if(Array.isArray(i)){var o=t.Name,l=e._i(i,o);s.checked?l<0&&e.$set(e.temp,"Command",i.concat([o])):l>-1&&e.$set(e.temp,"Command",i.slice(0,l).concat(i.slice(l+1)))}else e.$set(e.temp,"Command",n)}}}),e._v(" "),a("label",{attrs:{for:"index"}},[e._v(e._s(t.Name))])])}),0),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.multiCommandChoosed,expression:"multiCommandChoosed==true"}],attrs:{label:"单次 mset/mget 对应的 key 个数",prop:"KeyNum"}},[a("el-input",{attrs:{type:"number",min:"1",oninput:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.temp.KeyNum,callback:function(t){e.$set(e.temp,"KeyNum",e._n(t))},expression:"temp.KeyNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮件抄送人员(邮箱前缀，以','分隔)",prop:"DockingPersonnel"}},[a("el-input",{model:{value:e.temp.DockingPersonnel,callback:function(t){e.$set(e.temp,"DockingPersonnel",t)},expression:"temp.DockingPersonnel"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分区数(申请人无需填写)",prop:"PartitionNum"}},[a("el-input",{attrs:{type:"number",min:"1",disabled:!0,oninput:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.temp.PartitionNum,callback:function(t){e.$set(e.temp,"PartitionNum",e._n(t))},expression:"temp.PartitionNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"当前状态",prop:"Status"}},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.temp.Status,expression:"temp.Status",modifiers:{number:!0}}],attrs:{type:"radio",id:"keep",value:"1"},domProps:{checked:e._q(e.temp.Status,e._n("1"))},on:{change:function(t){e.$set(e.temp,"Status",e._n("1"))}}}),e._v(" "),a("label",{attrs:{for:"keep"}},[e._v("保存")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.temp.Status,expression:"temp.Status",modifiers:{number:!0}}],attrs:{type:"radio",id:"submit",value:"2"},domProps:{checked:e._q(e.temp.Status,e._n("2"))},on:{change:function(t){e.$set(e.temp,"Status",e._n("2"))}}}),e._v(" "),a("label",{attrs:{for:"submit"}},[e._v("提交")])])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("\n        取消\n      ")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){"create"===e.dialogStatus?e.createTicket():e.updateTicket()}}},[e._v("\n        提交\n      ")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.textDialogStatusMap[e.dialogStatus],visible:e.dialogProcessFormVisible}},[a("el-form",{ref:"processDataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{rules:e.rules,model:e.tempProcess,"label-position":"left","label-width":"120px"}},[a("el-form-item",{attrs:{label:"处理状态",prop:"TicketAcceptStatus"}},[a("el-switch",{attrs:{"active-text":e.textProcessStatusMap["accept"],"inactive-text":e.textProcessStatusMap["reject"],"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#13ce66"},model:{value:e.tempProcess.TicketAcceptStatus,callback:function(t){e.$set(e.tempProcess,"TicketAcceptStatus",t)},expression:"tempProcess.TicketAcceptStatus"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"数据库名",prop:"DatabaseName"}},[a("el-input",{attrs:{disabled:"process"==e.dialogStatus},model:{value:e.tempProcess.DatabaseName,callback:function(t){e.$set(e.tempProcess,"DatabaseName",t)},expression:"tempProcess.DatabaseName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"数据表名",prop:"TableName"}},[a("el-input",{attrs:{disabled:"process"==e.dialogStatus},model:{value:e.tempProcess.TableName,callback:function(t){e.$set(e.tempProcess,"TableName",t)},expression:"tempProcess.TableName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"数据中心",prop:"DcName"}},[a("el-select",{staticClass:"el-select",attrs:{loading:e.listDcLoading,placeholder:"请选择",disabled:0==e.tempProcess.TicketAcceptStatus},on:{"visible-change":e.fetchDcData,change:function(t){return e.getDcIdByName(e.tempProcess.DcName)}},model:{value:e.tempProcess.DcName,callback:function(t){e.$set(e.tempProcess,"DcName",t)},expression:"tempProcess.DcName"}},e._l(e.dcList,function(e){return a("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Name}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"数据表配置",prop:"TableConfigName"}},[a("el-select",{staticClass:"el-select",attrs:{loading:e.listConfigLoading,placeholder:"请选择",disabled:0==e.tempProcess.TicketAcceptStatus},on:{"visible-change":e.fetchConfigData,change:function(t){return e.getConfigIdByName(e.tempProcess.TableConfigName)}},model:{value:e.tempProcess.TableConfigName,callback:function(t){e.$set(e.tempProcess,"TableConfigName",t)},expression:"tempProcess.TableConfigName"}},e._l(e.configList,function(e){return a("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Name}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"分区数",prop:"PartitionNum"}},[a("el-input",{attrs:{type:"number",min:"1",disabled:0==e.tempProcess.TicketAcceptStatus,oninput:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.tempProcess.PartitionNum,callback:function(t){e.$set(e.tempProcess,"PartitionNum",e._n(t))},expression:"tempProcess.PartitionNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"数据过期时间",prop:"DataExpirationTime"}},[a("el-input",{attrs:{type:"number",oninput:"value=value.replace(/[^\\d]/g,'')",disabled:0==e.tempProcess.TicketAcceptStatus},model:{value:e.tempProcess.DataExpirationTime,callback:function(t){e.$set(e.tempProcess,"DataExpirationTime",e._n(t))},expression:"tempProcess.DataExpirationTime"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0==e.tempProcess.TicketAcceptStatus,expression:"tempProcess.TicketAcceptStatus==0"}],attrs:{label:"驳回原因",prop:"RejectReason"}},[a("el-input",{model:{value:e.tempProcess.RejectReason,callback:function(t){e.$set(e.tempProcess,"RejectReason",t)},expression:"tempProcess.RejectReason"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogProcessFormVisible=!1}}},[e._v("\n        取消\n      ")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.ticketProcess()}}},[e._v("\n        提交\n      ")])],1)],1)],1)},s=[],n=a("b775");function o(e){return Object(n["a"])({url:"/ticket/list",method:"get",params:e})}function l(e){return Object(n["a"])({url:"/ticket/store",method:"post",data:e})}function r(e){return Object(n["a"])({url:"/ticket/update",method:"post",data:e})}function c(e){return Object(n["a"])({url:"/ticket/process",method:"post",data:e})}function m(e){return Object(n["a"])({url:"/ticket/delete",method:"post",data:e})}var u=a("de15"),p=a("c48b"),d=a("ad8f"),f=a("a266"),b=a("6724"),h=a("61f7"),v=(a("2f62"),{directives:{waves:b["waves"]},data:function(){return{checkedNames:[],dialogFormVisible:!1,dialogProcessFormVisible:!1,keyNumVisible:!1,listLoading:!0,ticketList:void 0,ticketDelete:{TicketId:void 0},commandList:void 0,listTotal:void 0,listDBLoading:!0,listDTLoading:!0,listConfigLoading:!0,listDcLoading:!0,dcList:void 0,ticketKey:0,textDialogStatusMap:{create:"创建工单",update:"修改工单",process:"工单审核"},textTicketStatusMap:{update:"修改",watch:"查看"},textProcessStatusMap:{reject:"驳回",accept:"接受"},dialogStatus:"create",multiCommandChoosed:!1,flagMget:!1,flagMset:!1,flagMgetDetail:!1,flagMsetDetail:!1,databaseList:null,dataTableList:null,configList:null,temp:this.newTicketInfo(),tempProcess:this.newProcessTicketInfo(),fetchDTName:{Page:void 0,Limit:void 0,DatabaseId:void 0},queryParams:{Loader:"",Page:1,Limit:20},rules:{SDKType:[{required:!0,message:"sdk 是必填项"}],DatabaseName:[{required:!0,message:"数据库名称是必填项"}],TableName:[{required:!0,message:"数据表名称是必填项"}],ValueSize:[{required:!0,message:"value 大小预估是必填项"}],Command:[{required:!0,message:"调用接口是必填项"}],Status:[{required:!0,message:"当前状态是必填项"}],TableConfigName:[{required:!0,message:"数据表配置是必填项"}],DcName:[{required:!0,message:"数据中心是必填项"}],PartitionNum:[{required:!0,message:"分区数是必填项"},{type:"number",message:"请输入数字格式"},{validator:h["e"],trigger:"blur"}]},SDKTypes:[{type:"go"},{type:"c++"},{type:"java"}],statusText:{1:"保存",2:"待审核",3:"被驳回",4:"处理失败",5:"处理完成"}}},created:function(){this.resetTemp(),this.resetTempProcess(),this.fetchTicketList(),this.fetchCommands()},methods:{resetTemp:function(){this.temp=this.newTicketInfo()},resetTempProcess:function(){this.tempProcess=this.newProcessTicketInfo()},fetchTicketList:function(){var e=this;this.listLoading=!0,o(this.queryParams).then(function(t){e.ticketList=t.Data.Items,e.listTotal=t.Data.Total,e.listLoading=!1,e.updateParams()})},fetchCommands:function(){var e=this;Object(d["c"])().then(function(t){e.commandList=t.Data.Items})},handleCreate:function(){var e=this;this.temp=this.newTicketInfo(),this.dialogFormVisible=!0,this.dialogStatus="create",this.$nextTick(function(){e.$refs["dataForm"].clearValidate()})},handleUpdate:function(e){var t=this;this.temp.Id=e.Id,this.temp.Creator=e.Creator,this.temp.SDKType=e.SDKType,this.temp.BusinessLine=e.BusinessLine,this.temp.BusinessDescription=e.BusinessDescription,this.temp.BusinessKR=e.BusinessKR,this.temp.ReadContactPersion=e.ReadContactPersion,this.temp.WriteContactPersion=e.WriteContactPersion,this.temp.ImportDataContactPersion=e.ImportDataContactPersion,this.temp.DatabaseName=e.DatabaseName,this.temp.TableName=e.TableName,this.temp.ReadQPS=e.ReadQPS,this.temp.WriteQPS=e.WriteQPS,this.temp.RequestDelayLimit=e.RequestDelayLimit,this.temp.DataExpirationTime=e.DataExpirationTime,this.temp.DataSize=e.DataSize,this.temp.ValueSize=e.ValueSize,this.temp.CrashInfluence=e.CrashInfluence,this.temp.Command=e.Command,this.temp.KeyNum=e.KeyNum,this.temp.DockingPersonnel=e.DockingPersonnel,this.temp.PartitionNum=e.PartitionNum,this.temp.Status=e.Status,this.temp.TicketStatus=e.TicketStatus,this.dialogFormVisible=!0,this.dialogStatus="update",this.updateParams(),this.$nextTick(function(){t.$refs["dataForm"].clearValidate()})},deleteTicket:function(e){var t=this;this.ticketDelete.TicketId=e.Id,this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){m(t.ticketDelete).then(function(e){t.$notify({title:"Success",message:"Delete Successfully",type:"success",duration:2e3}),t.fetchTicketList()})})},handleProcess:function(e){var t=this;this.tempProcess=this.newProcessTicketInfo(),this.dialogProcessFormVisible=!0,this.dialogStatus="process",this.tempProcess.Handler=this.$store.state.user.email,this.tempProcess.DatabaseName=e.DatabaseName,this.tempProcess.TableName=e.TableName,this.tempProcess.DataExpirationTime=e.DataExpirationTime,this.$nextTick(function(){t.$refs["processDataForm"].clearValidate()})},createTicket:function(){var e=this;this.$refs["dataForm"].validate(function(t){t&&(e.temp.Creator=e.$store.state.user.email,l(e.temp).then(function(t){e.$notify({title:"Success",message:"Created Successfully",type:"success",duration:2e3}),e.fetchTicketList()}),e.dialogFormVisible=!1,e.updateParams())})},updateTicket:function(){var e=this;this.$refs["dataForm"].validate(function(t){t&&(r(e.temp).then(function(t){e.$notify({title:"Success",message:"Update Successfully",type:"success",duration:2e3}),e.fetchTicketList()}),e.dialogFormVisible=!1,e.updateParams())})},ticketProcess:function(){var e=this;this.$refs["processDataForm"].validate(function(t){t&&(e.shardListLoading=!0,c(e.tempProcess).then(function(t){e.$notify({title:"Success",message:"Process Successfully",type:"success",duration:2e3}),e.fetchTicketList()}),e.dialogProcessFormVisible=!1)})},handleCurrentChange:function(e){this.queryParams.Page=e,this.fetchTicketList()},fetchDatabase:function(){var e=this;this.listDBLoading=!0,Object(p["c"])().then(function(t){e.databaseList=t.Data.Items,e.temp.TableName="",e.listDBLoading=!1})},fetchDataTable:function(){var e=this;this.listDTLoading=!0,Object(d["d"])(this.fetchDTName).then(function(t){e.dataTableList=t.Data.Items,e.listDTLoading=!1})},getDatabaseIdByName:function(e){for(var t=0;t<this.databaseList.length;++t)if(e==this.databaseList[t].Name){this.fetchDTName.DatabaseId=this.databaseList[t].Id;break}},fetchConfigData:function(e){var t=this;e&&(this.listConfigLoading=!0,Object(f["c"])().then(function(e){t.configList=e.Data.Items}).finally(function(){t.listConfigLoading=!1}))},fetchDcData:function(e){var t=this;e&&(this.listDcLoading=!0,Object(u["b"])().then(function(e){t.dcList=e.Data.Items}).finally(function(){t.listDcLoading=!1}))},getDcIdByName:function(e){for(var t=0;t<this.dcList.length;++t)if(e==this.dcList[t].Name){this.tempProcess.DcId=this.dcList[t].Id;break}},getConfigIdByName:function(e){for(var t=0;t<this.configList.length;++t)if(e==this.configList[t].Name){this.tempProcess.TableConfigId=this.configList[t].Id;break}},updateCommandChoosed:function(e){this.multiCommandChoosed=!1,"mget"==e.Name&&(this.flagMget=!this.flagMget),"mset"==e.Name&&(this.flagMset=!this.flagMset),"mgetDetail"==e.Name&&(this.flagMgetDetail=!this.flagMgetDetail),"msetDetail"==e.Name&&(this.flagMsetDetail=!this.flagMsetDetail),(this.flagMget||this.flagMset||this.flagMgetDetail||this.flagMsetDetail)&&(this.multiCommandChoosed=!this.multiCommandChoosed)},updateParams:function(e){for(var t=0;t<this.ticketList.length;t++){var a=this.$store.state.user.email==this.ticketList[t].Creator&&1==this.ticketList[t].Status||this.$store.state.user.isAdmin;this.ticketList[t].TicketStatus=1==a?"update":"watch"}for(t=0;t<this.temp.Command.length;t++)"mget"==this.temp.Command[t]&&(this.flagMget=!0),"mset"==this.temp.Command[t]&&(this.flagMset=!0),"mgetDetail"==this.temp.Command[t]&&(this.mgetDetail=!0),"mgetDetail"==this.temp.Command[t]&&(this.msetDetail=!0);(this.flagMget||this.flagMset||this.flagMgetDetail||this.flagMsetDetail)&&(this.multiCommandChoosed=!this.multiCommandChoosed)},inputDatabaseName:function(e){this.temp.DatabaseName=e.target.value},inputTableName:function(e){this.temp.TableName=e.target.value},newTicketInfo:function(){return{Id:0,Creator:void 0,SDKType:[],BusinessLine:void 0,BusinessDescription:void 0,BusinessKR:void 0,ReadContactPersion:void 0,WriteContactPersion:void 0,ImportDataContactPersion:void 0,DatabaseName:void 0,TableName:void 0,ReadQPS:void 0,WriteQPS:void 0,RequestDelayLimit:void 0,DataExpirationTime:0,DataSize:void 0,ValueSize:void 0,CrashInfluence:void 0,Command:[],KeyNum:void 0,DockingPersonnel:void 0,PartitionNum:1,Status:void 0,TicketStatus:"update"}},newProcessTicketInfo:function(){return{Handler:void 0,TicketAcceptStatus:1,DatabaseName:void 0,TableName:void 0,DcName:void 0,DcId:0,DataExpirationTime:0,TableConfigId:1,TableConfigName:"default",PartitionNum:100,RejectReason:void 0}}}}),g=v,D=(a("f2c1"),a("2877")),k=Object(D["a"])(g,i,s,!1,null,null,null);t["default"]=k.exports},a266:function(e,t,a){"use strict";a.d(t,"c",function(){return s}),a.d(t,"d",function(){return n}),a.d(t,"a",function(){return o}),a.d(t,"e",function(){return l}),a.d(t,"b",function(){return r});var i=a("b775");function s(e){return Object(i["a"])({url:"/table_config/list",method:"get",params:e})}function n(e){return Object(i["a"])({url:"/table_config/list_detail",method:"get",params:e})}function o(e){return Object(i["a"])({url:"/table_config/store",method:"post",data:e})}function l(e){return Object(i["a"])({url:"/table_config/update",method:"post",data:e})}function r(e){return Object(i["a"])({url:"/table_config/delete",method:"post",data:e})}},ad8f:function(e,t,a){"use strict";a.d(t,"d",function(){return s}),a.d(t,"e",function(){return n}),a.d(t,"a",function(){return o}),a.d(t,"g",function(){return l}),a.d(t,"b",function(){return r}),a.d(t,"f",function(){return c}),a.d(t,"c",function(){return m});var i=a("b775");function s(e){return Object(i["a"])({url:"/table/list",method:"get",params:e})}function n(e){return Object(i["a"])({url:"/table/list_detail",method:"get",params:e})}function o(e){return Object(i["a"])({url:"/table/store",method:"post",data:e})}function l(e){return Object(i["a"])({url:"/table/update",method:"post",data:e})}function r(e){return Object(i["a"])({url:"/table/delete",method:"post",data:e})}function c(){return Object(i["a"])({url:"table/synchronize",method:"post"})}function m(){return Object(i["a"])({url:"/table/list_commands",method:"get"})}},c48b:function(e,t,a){"use strict";a.d(t,"c",function(){return s}),a.d(t,"a",function(){return n}),a.d(t,"d",function(){return o}),a.d(t,"b",function(){return l});var i=a("b775");function s(e){return Object(i["a"])({url:"/database/list",method:"get",params:e})}function n(e){return Object(i["a"])({url:"/database/store",method:"post",data:e})}function o(e){return Object(i["a"])({url:"/database/update",method:"post",data:e})}function l(e){return Object(i["a"])({url:"/database/delete",method:"post",data:e})}},de15:function(e,t,a){"use strict";a.d(t,"b",function(){return s}),a.d(t,"a",function(){return n}),a.d(t,"c",function(){return o});var i=a("b775");function s(e){return Object(i["a"])({url:"/dc/list",method:"get",params:e})}function n(e){return Object(i["a"])({url:"/dc/store",method:"post",data:e})}function o(e){return Object(i["a"])({url:"/dc/update",method:"post",data:e})}},f2c1:function(e,t,a){"use strict";var i=a("5e25"),s=a.n(i);s.a}}]);